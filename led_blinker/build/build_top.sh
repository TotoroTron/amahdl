# Automatically generated by Amaranth 0.4.1.dev61+g115954b. Do not edit.
set -e
[ -n "$AMARANTH_ENV_Xray" ] && . "$AMARANTH_ENV_Xray"
[ -n "$AMARANTH_ENV_XRAY" ] && . "$AMARANTH_ENV_XRAY"
: ${DB_DIR:=/usr/share/nextpnr/prjxray-db}
: ${CHIPDB_DIR:=/usr/share/nextpnr/xilinx-chipdb}
: ${YOSYS:=yosys}
: ${NEXTPNR_XILINX:=nextpnr-xilinx}
: ${FASM2FRAMES:=fasm2frames}
: ${XC7FRAMES2BIT:=xc7frames2bit}
"$YOSYS" -p "synth_xilinx -flatten -abc9 -nobram -arch xc7 -top top; write_json top.json" top.v
"$NEXTPNR_XILINX" --chipdb $CHIPDB_DIR/xc7z020.bin --xdc top.xdc --json top.json --write top_routed.json --fasm top.fasm
"$FASM2FRAMES" --part xc7z020clg400-1 --db-root $DB_DIR/zynq7 top.fasm > top.frames
"$XC7FRAMES2BIT" --part_file $DB_DIR/zynq7/xc7z020clg400-1/part.yaml --part_name xc7z020clg400-1 --frm_file top.frames --output_file top.bit
