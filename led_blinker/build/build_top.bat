@rem Automatically generated by Amaranth 0.4.1.dev61+g115954b. Do not edit.
@echo off
if defined AMARANTH_ENV_Xray call %AMARANTH_ENV_Xray%
if defined AMARANTH_ENV_XRAY call %AMARANTH_ENV_XRAY%
if [%YOSYS%] equ [""] set YOSYS=
if [%YOSYS%] equ [] set YOSYS=yosys
if [%NEXTPNR_XILINX%] equ [""] set NEXTPNR_XILINX=
if [%NEXTPNR_XILINX%] equ [] set NEXTPNR_XILINX=nextpnr-xilinx
if [%FASM2FRAMES%] equ [""] set FASM2FRAMES=
if [%FASM2FRAMES%] equ [] set FASM2FRAMES=fasm2frames
if [%XC7FRAMES2BIT%] equ [""] set XC7FRAMES2BIT=
if [%XC7FRAMES2BIT%] equ [] set XC7FRAMES2BIT=xc7frames2bit
%YOSYS% -p "synth_xilinx -flatten -abc9 -nobram -arch xc7 -top top; write_json top.json" top.v || exit /b
%NEXTPNR_XILINX% --chipdb $CHIPDB_DIR/xc7z020.bin --xdc top.xdc --json top.json --write top_routed.json --fasm top.fasm || exit /b
%FASM2FRAMES% --part xc7z020clg400-1 --db-root $DB_DIR/zynq7 top.fasm > top.frames || exit /b
%XC7FRAMES2BIT% --part_file $DB_DIR/zynq7/xc7z020clg400-1/part.yaml --part_name xc7z020clg400-1 --frm_file top.frames --output_file top.bit || exit /b
